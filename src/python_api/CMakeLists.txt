CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

# include the CTest framework
include(CTest)

FIND_PACKAGE(SWIG)

IF( SWIG_FOUND )
	INCLUDE(${SWIG_USE_FILE})
	FIND_PACKAGE(PythonLibs)
ENDIF( SWIG_FOUND )


IF(SWIG_FOUND AND PYTHONLIBS_FOUND)

	INCLUDE_DIRECTORIES( ${VSP_SOURCE_DIR}
		${PYTHON_INCLUDE_PATH}
		${UTIL_INCLUDE_DIR}
		${GEOM_CORE_INCLUDE_DIR}
		${GEOM_API_INCLUDE_DIR}
		${GUI_AND_DRAW_INCLUDE_DIR}
		${TRIANGLE_INCLUDE_DIR}
		${NANOFLANN_INCLUDE_DIR}
		${CPPTEST_INCLUDE_DIR}
		${LOAD_JPG_INCLUDE_DIR}
		${SCREENS_INCLUDE_DIR}
		${XMLVSP_INCLUDE_DIR}
		${CPPTEST_INCLUDE_DIR}
		${JPEG_INCLUDE_DIR}
		${FLTK_INCLUDE_DIR}
		${LIBXML2_INCLUDE_DIR}
		${EIGEN3_INCLUDE_DIR}
		${CodeEli_INCLUDE_DIRS}
		${STEPCODE_INCLUDE_DIR}
	 )

	SET(CMAKE_SWIG_FLAGS "")


	SET_SOURCE_FILES_PROPERTIES(vsp.i PROPERTIES CPLUSPLUS ON)
	SWIG_ADD_MODULE(vsp python vsp.i )

	SWIG_LINK_LIBRARIES( vsp
		util
		tritri
		geom_core
		geom_api
		cfd_mesh_stuff
		triangle
		xmlvsp
		sixseries
		${CPPTEST_LIBRARIES}
		${LIBXML2_LIBRARIES}
		${PYTHON_LIBRARIES}
		${STEPCODE_LIBRARIES}
	)

	IF( NOT VSP_NO_GRAPHICS )

		SET_SOURCE_FILES_PROPERTIES(vsp_g.i PROPERTIES CPLUSPLUS ON)
		SWIG_ADD_MODULE(vsp_g python vsp_g.i )

		SWIG_LINK_LIBRARIES( vsp_g
			util
			tritri
			geom_core
			geom_api_g
			gui_and_draw
			cfd_mesh_stuff
			triangle
			load_jpg
			screens
			xmlvsp
			sixseries
			${CPPTEST_LIBRARIES}
			${JPEG_LIBRARIES}
			${LIBXML2_LIBRARIES}
			${FLTK_LIBRARIES}
			${OPENGL_LIBRARIES}
			${PYTHON_LIBRARIES}
			${STEPCODE_LIBRARIES}
		)

	ENDIF()

ENDIF(SWIG_FOUND AND PYTHONLIBS_FOUND)
